(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var s=a(1),r=a.n(s),n=a(22),c=a.n(n),i=a(9),o=a.n(i),l=a(14),j=a(5),d=a(6),h=a(8),m=a(7),u=(a(30),a(2)),b=a(0);function p(){return Object(b.jsxs)("ul",{className:"header__links",children:[Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{className:"header__nav-link",activeClassName:"active",to:"/",exact:!0,children:"Home"})}),Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{className:"header__nav-link",activeClassName:"active",to:"/login",children:"Sign In"})}),Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{className:"header__nav-link",activeClassName:"active",to:"/register",children:"Sign Up"})})]})}function f(e){return Object(b.jsxs)("ul",{className:"header__links",children:[Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{className:"header__nav-link",activeClassName:"active",to:"/",exact:!0,children:"Dashboard"})}),Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{className:"header__nav-link",activeClassName:"active",to:"/editor",children:"New Portfolio"})}),Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{className:"header__nav-link",activeClassName:"active",to:"/settings",children:"Settings"})}),Object(b.jsx)("li",{children:Object(b.jsxs)(u.c,{className:"header__nav-link avatar-div",activeClassName:"active",to:"/profiles/".concat(e.user.username),children:[Object(b.jsx)("img",{src:e.user.image||"http://i.imgur.com/Xzm3mI0.jpg",className:"header__avatar",alt:"user avatar"}),e.user.username]})})]})}var O=function(e){return Object(b.jsx)("header",{className:"header",children:Object(b.jsxs)("div",{className:"container flex",children:[Object(b.jsx)(u.b,{className:"header__logo",to:"/",children:"Manzr"}),Object(b.jsx)("nav",{children:e.isLoggedIn?Object(b.jsx)(f,{user:e.user}):Object(b.jsx)(p,{})})]})})};var x=function(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsxs)("div",{className:"container flex",children:[Object(b.jsx)("small",{className:"footer__small",children:"Copyright left at the store"}),Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{className:"footer__links",children:[Object(b.jsx)("li",{children:Object(b.jsx)(u.b,{to:"/",children:"Twitter"})}),Object(b.jsx)("li",{children:Object(b.jsx)(u.b,{to:"/",children:"Facebook"})}),Object(b.jsx)("li",{children:Object(b.jsx)(u.b,{to:"/",children:"Instagram"})}),Object(b.jsx)("li",{children:Object(b.jsx)(u.b,{to:"https://github.com/bharat-patodi/manzar",children:"Github"})}),Object(b.jsx)("li",{children:Object(b.jsx)(u.b,{to:"/",children:"Careers"})})]})})]})})};function g(){return Object(b.jsxs)("div",{className:"ripple-loader",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})}var v=a(3),N=a(12),_=a(21),y=a(24),w=a.n(y),k="/api/portfolios",C="/api/users/login",S="/api/users",M="user_token";function E(){return Object(b.jsx)("div",{className:"donut"})}var L=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(j.a)(this,a),(s=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),s.setState({isCreatingComment:!0});var t=s.props.id,a={body:s.state.commentBody},r={method:"POST",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(M)},body:JSON.stringify({comment:a})};fetch("".concat(k,"/").concat(t,"/comments"),r).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,s=a.errors,e.next=7,Promise.reject(s);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=e.comment,a=Object(_.a)(s.state.comments);a.unshift(t),s.setState({comments:a,isCreatingComment:!1,commentBody:""})})).catch((function(e){s.setState({postRequestError:"Not able to create the comment",isCreatingComment:!1})}))},s.handleChange=function(e){var t=e.target,a=t.name,r=t.value;s.setState(Object(N.a)({},a,r))},s.handleDeleteComment=function(e){s.props.id;var t={method:"DELETE",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(M)}};fetch("".concat(k,"/").concat(e,"/comments/").concat(e),t).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,s=a.errors,e.next=7,Promise.reject(s);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){var t=Object(_.a)(s.state.comments).filter((function(t){return t.userId!==e}));s.setState({comments:t})})).catch((function(e){console.log(e)}))},s.state={Comments:null,fetchRequestError:"",postRequestError:"",commentBody:"",isCreatingComment:!1},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.id;fetch("".concat(k,"/").concat(t,"/comments"),{authorization:localStorage.getItem(M)}).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,s=a.errors,e.next=7,Promise.reject(s);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.setState({comments:t.comments})})).catch((function(t){e.setState({fetchRequestError:"Not able to fetch the comments"})}))}},{key:"render",value:function(){var e=this.state,t=e.comments,a=(e.error,e.fetchRequestError),s=e.commentBody,r=e.isCreatingComment;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"comment-container",children:[Object(b.jsx)("h1",{className:"title",children:"Feedback"}),Object(b.jsx)("div",{className:"user-comment flex",children:this.props.user?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{className:"user-avatar",src:this.props.user.image||"http://i.imgur.com/Xzm3mI0.jpg",alt:"user-profile-avatar"}),Object(b.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(b.jsx)("textarea",{name:"commentBody",onChange:this.handleChange,value:s,className:"form-control",placeholder:"Write a comment...",rows:"3"}),Object(b.jsx)("button",{className:"btn btn-sm btn-primary",children:r?Object(b.jsx)(E,{}):"Submit"})]})]}):""}),Object(b.jsx)(F,{comments:t,fetchRequestError:a,currentUser:this.props.user,handleDeleteComment:this.handleDeleteComment})]})})}}]),a}(r.a.Component);function F(e){var t;return console.log(e),e.fetchRequestError?Object(b.jsx)("p",{className:"api-fetch-error",children:e.fetchRequestError}):e.comments?(null===(t=e.comments)||void 0===t?void 0:t.length)?Object(b.jsx)("div",{className:"display-comment",children:Object(b.jsx)("ul",{className:"comment-list",children:e.comments.map((function(t){var a;return Object(b.jsxs)("li",{className:"comment-list-item",children:[Object(b.jsxs)("div",{className:"user-info flex-between",children:[Object(b.jsxs)("div",{className:"user-details flex",children:[Object(b.jsx)(u.b,{to:"/profiles/".concat(t.author.username),className:"comment-author",children:Object(b.jsx)("img",{src:(null===(a=t.author)||void 0===a?void 0:a.image)||"http://i.imgur.com/Xzm3mI0.jpg",alt:"user-profile-avatar",className:"user-avatar"})}),Object(b.jsx)("span",{className:"user-name",children:t.author.username}),Object(b.jsx)("span",{className:"comment-timestamp",children:w()(t.createdAt).format("dddd, MMMM Do YYYY")})]}),e.currentUser.username===t.author.username?Object(b.jsx)("div",{className:"comment-actions",children:Object(b.jsx)("span",{onClick:function(){return e.handleDeleteComment(t.id)},className:"btn",children:"\ud83d\uddd1 Delete"})}):""]}),Object(b.jsx)("div",{className:"comment",children:Object(b.jsx)("p",{children:t.body})})]})}))})}):Object(b.jsx)("h5",{className:"no-comments",children:"No comments..."}):Object(b.jsx)(E,{})}var I=Object(v.f)(L),P=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.portfolio;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"more-by-heading flex",children:[Object(b.jsx)("h4",{children:"More by ".concat(e.author.name)}),Object(b.jsx)("p",{className:"btn",children:Object(b.jsx)(u.b,{to:"/profiles/".concat(e.author.username),children:"View Profile"})})]}),Object(b.jsx)("div",{className:"more-by-thumbnails",children:Object(b.jsxs)("ul",{className:"thumbnails-list",children:[Object(b.jsxs)("li",{className:"thumbnails-list-items",children:[Object(b.jsx)("div",{className:"thumbnails",children:Object(b.jsx)("img",{src:"https://images.unsplash.com/photo-1603539947678-cd3954ed515d?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1050&q=80",alt:"portfolio-title"})}),Object(b.jsx)("div",{className:"thumbnail-portfolio-title",children:"Acency Landing Page"})]}),Object(b.jsxs)("li",{className:"thumbnails-list-items",children:[Object(b.jsx)("div",{className:"thumbnails",children:Object(b.jsx)("img",{src:"https://images.unsplash.com/photo-1603539947678-cd3954ed515d?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1050&q=80",alt:"portfolio-title"})}),Object(b.jsx)("div",{className:"thumbnail-portfolio-title",children:"Acency Landing Page"})]})]})})]})}}]),a}(r.a.Component),D=(Object(v.f)(P),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(j.a)(this,a),console.log(e),(s=t.call(this,e)).fetchData=function(){var e=s.props.match.params.id,t={method:"GET",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(M)}};fetch("".concat(k,"/").concat(e),t).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){s.setState({portfolio:e.portfolio,error:""})})).catch((function(e){s.setState({error:"Not able to fetch data"})}))},s.state={portfolio:null,error:""},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.portfolio,a=e.error,s=this.props.user;return a?Object(b.jsx)("p",{className:"api-fetch-error",children:a}):t?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"overlay",children:[Object(b.jsx)("div",{className:"overlay__close-button",children:Object(b.jsx)("button",{className:"close-btn",onClick:this.props.closeModal,children:"x"})}),Object(b.jsx)("div",{className:"overlay__modal",children:Object(b.jsxs)("div",{className:"overlay__modal-container",children:[Object(b.jsxs)("div",{className:"overlay__modal-content-container",children:[Object(b.jsx)("div",{className:"modal__user",children:Object(b.jsxs)("div",{className:"user-info flex-between",children:[Object(b.jsxs)("div",{className:"user-info__container",children:[Object(b.jsx)(u.b,{to:"/profiles/".concat(t.author.username),children:Object(b.jsx)("img",{className:"user-avatar",src:t.image?t.image:"https://cdn.dribbble.com/users/6047818/avatars/small/84b15dbafef241b1493507776816d4b0.jpg?1600202707",alt:"user-profile-avatar"})}),Object(b.jsxs)("div",{className:"user-info__header-details",children:[Object(b.jsx)("h1",{className:"portfolio-title",children:t.title||"Personal portfolio website"}),Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)(u.b,{to:"/profiles/".concat(t.author.username),children:Object(b.jsx)("h4",{className:"user-link",children:t.author.name})}),Object(b.jsx)(u.b,{to:"/profiles/".concat(t.author.username,"/follow"),children:Object(b.jsx)("span",{className:"user-follow",children:"Follow"})})]})]})]}),Object(b.jsxs)("div",{className:"user-info__header-actions",children:[Object(b.jsx)(u.b,{to:t.url,children:Object(b.jsx)("button",{className:"btn",children:"Portfolio"})}),Object(b.jsxs)("a",{className:"btn",href:"/profile",children:["\ud83d\udda4 ",t.favoritesCount]})]})]})}),Object(b.jsx)("div",{className:"modal__portfolio",children:Object(b.jsx)("iframe",{title:"portfolio",src:t.url,frameBorder:"0",className:"portfolio-preview",height:"600%",width:"100%"})}),Object(b.jsxs)("section",{className:"description-container",children:[Object(b.jsx)("p",{children:t.description}),Object(b.jsxs)("p",{children:["I am available for work :",Object(b.jsx)("br",{}),Object(b.jsx)("a",{href:"mailto:".concat(t.author.email),children:t.author.email})]})]}),Object(b.jsx)("section",{className:"feedback-section",children:Object(b.jsx)(I,{id:t.id,user:s})})]}),Object(b.jsxs)("section",{className:"user-details-section",children:[Object(b.jsxs)("div",{className:"user-avatar-container flex",children:[Object(b.jsx)("span",{className:"user-avatar-line"}),Object(b.jsx)(u.b,{to:"/profiles/".concat(t.author.username),children:Object(b.jsx)("img",{className:"user-avatar",src:t.image?t.image:"https://cdn.dribbble.com/users/6047818/avatars/small/84b15dbafef241b1493507776816d4b0.jpg?1600202707",alt:"user-profile-avatar"})}),Object(b.jsx)("span",{className:"user-avatar-line"})]}),Object(b.jsx)(u.b,{to:"/profiles/".concat(t.author.username),children:Object(b.jsx)("h4",{className:"user-link",children:t.author.name})}),Object(b.jsx)("div",{className:"user-bio",children:t.author.bio})]})]})})]})}):Object(b.jsx)(E,{})}}]),a}(r.a.Component)),q=Object(v.f)(D);function U(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"portfolio-card",children:[Object(b.jsx)(u.b,{to:"portfolios/".concat(e.id),onClick:e.openModal,children:Object(b.jsx)("img",{src:e.image||e.prominentImage,alt:"",className:"portfolio-card__image"})}),Object(b.jsxs)("div",{className:"portfolio-card__text-info",children:[Object(b.jsx)("h4",{children:e.author}),Object(b.jsx)("p",{children:"Likes"}),Object(b.jsx)("p",{children:"Views"})]})]}),e.isModalOpen?Object(b.jsx)(q,{isModalOpen:e.isModalOpen,closeModal:e.closeModal}):""]})}var T=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(j.a)(this,a),(s=t.call(this,e)).handleTagClick=function(e){console.log(e),s.setState({activeTag:e})},s.state={portfolios:[],tags:[],users:[],activeTag:""},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/portfolios").then((function(e){return e.json()})).then((function(t){var a=Array.from(new Set(t.portfolios.map((function(e){return e.tagList})).flat())).filter((function(e){return""!==e})),s=Array.from(new Set(t.portfolios.map((function(e){return e.author.username})))).filter((function(e){return""!==e}));e.setState({portfolios:t.portfolios,tags:a,users:s})}))}},{key:"render",value:function(){var e=this;if(0===this.state.portfolios.length)return Object(b.jsx)("p",{children:"Loading..."});var t=[];return t=this.state.activeTag?this.state.portfolios.filter((function(t){return t.tagList.includes(e.state.activeTag)})):this.state.portfolios,Object(b.jsxs)("div",{className:"home",children:[Object(b.jsx)("section",{className:"hero",children:Object(b.jsx)("h1",{children:"Portfolio is a box of chocolates!"})}),Object(b.jsxs)("section",{className:"dashboard",children:[Object(b.jsx)("section",{className:"tag-bar",children:this.state.tags&&this.state.tags.map((function(t){return Object(b.jsx)("button",{className:t===e.state.activeTag?"tag standard-btn active":"tag standard-btn",onClick:function(){return e.handleTagClick(t)},children:t},t)}))}),Object(b.jsx)("section",{className:"dashboard__card-showcase",children:t.map((function(t){return Object(b.jsx)(U,{prominentImage:"https://images.unsplash.com/photo-1603539947678-cd3954ed515d?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1050&q=80",author:t.author.username,image:t.image,id:t.id,isModalOpen:e.props.isModalOpen,openModal:e.props.openModal,closeModal:e.props.closeModal})}))})]})]})}}]),a}(r.a.Component),A=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(j.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={name:"",username:"",email:"",password:"",errors:{name:"",username:"",email:"",password:""},requestError:"",validationError:"",isRegistering:!1},e.handleSubmit=function(t){t.preventDefault(),e.setState({isRegistering:!0});var a=e.state,s={name:a.name,username:a.username,email:a.email,password:a.password},r=e.state.errors;if(!r.username&&!r.email&&!r.password){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:s})};fetch(S,n).then((function(e){if(422!==e.status&&!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){if(t.errors){var a=t.errors.body[0];e.setState({validationError:a.includes("email")?"Email is already exist":"Username is already exist"})}else e.props.updateUser(t.user),e.props.history.push("/");e.setState({isRegistering:!1})})).catch((function(t){e.setState({requestError:"Not able to login",isRegistering:!1})}))}},e.handleChange=function(t){var a,s=t.target,r=s.name,n=s.value,c=e.state.errors;R(n,r,c),e.setState((a={},Object(N.a)(a,r,n),Object(N.a)(a,"errors",c),a))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.username,s=e.email,r=e.password,n=e.errors,c=e.validationError,i=e.requestError,o=e.isRegistering;return Object(b.jsx)("section",{className:"full-height auth",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h1",{className:"auth__heading",children:"Sign up"}),Object(b.jsx)("p",{className:"auth__link",children:Object(b.jsx)(u.b,{to:"/login",children:"Have an account?"})}),Object(b.jsx)("p",{className:"auth__server-error",children:c}),Object(b.jsx)("p",{className:"auth__server-error",children:i}),Object(b.jsxs)("form",{onSubmit:this.handleSubmit,className:"auth__form",children:[Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"name",children:"Full Name"}),Object(b.jsx)("input",{id:"name",onChange:this.handleChange,name:"name",value:t,className:"auth__form-control ".concat(n.name&&"auth__error"),type:"text",placeholder:"Enter name",required:!0})]}),n.name?Object(b.jsx)("span",{className:"auth__error-msg",children:n.name}):"",Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"username",children:"Username"}),Object(b.jsx)("input",{id:"username",onChange:this.handleChange,name:"username",value:a,className:"auth__form-control ".concat(n.username&&"auth__error"),type:"text",placeholder:"Enter username",required:!0})]}),n.username?Object(b.jsx)("span",{className:"auth__error-msg",children:n.username}):"",Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"username",children:"Email"}),Object(b.jsx)("input",{onChange:this.handleChange,name:"email",value:s,className:"auth__form-control ".concat(n.email&&"auth__error"),type:"email",placeholder:"Enter email",required:!0})]}),n.email?Object(b.jsx)("span",{className:"auth__error-msg",children:n.email}):"",Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"username",children:"Password"}),Object(b.jsx)("input",{onChange:this.handleChange,name:"password",value:r,className:"auth__form-control ".concat(n.password&&"auth__error"),type:"password",placeholder:"Enter password",required:!0})]}),n.password?Object(b.jsx)("span",{className:"auth__error-msg",children:n.password}):"",Object(b.jsx)("button",{type:"submit",className:"btn-large",children:o?Object(b.jsx)(E,{}):"Sign up"})]})]})})}}]),a}(s.Component);function R(e,t,a){switch(t){case"name":a.name=e.length?"":"Name is required";break;case"username":a.username=e.length?e.length>=6?"":"Username must be atleast 6 characters":"Username is required";break;case"email":a.email=e.length?/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?"":"Email is invalid":"Email is required";break;case"password":a.password=e.length?/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/.test(e)?e.length<6?"Password must contain atleast 6 characters":"":"Password must contain a letter, a number":"Password is required"}}var z=Object(v.f)(A),B=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(j.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",errors:{email:"",password:""},requestError:"",validationError:"",isLogging:!1},e.handleSubmit=function(t){t.preventDefault(),e.setState({isLogging:!0});var a=e.state,s={email:a.email,password:a.password},r=e.state.errors;if(!r.email&&!r.password){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:s})};fetch(C,n).then((function(e){if(422!==e.status&&!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){t.errors?e.setState({validationError:t.errors.body[0]}):(e.props.updateUser(t.user),e.props.history.push("/")),e.setState({isLogging:!1})})).catch((function(t){e.setState({requestError:"Not able to login",isLogging:!1})}))}},e.handleChange=function(t){var a,s=t.target,r=s.name,n=s.value,c=e.state.errors;R(n,r,c),e.setState((a={},Object(N.a)(a,r,n),Object(N.a)(a,"errors",c),a))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,s=e.errors,r=e.validationError,n=e.requestError,c=e.isLogging;return Object(b.jsx)("section",{className:"full-height auth",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h1",{className:"auth__heading",children:"Sign In"}),Object(b.jsx)("p",{className:"auth__link",children:Object(b.jsx)(u.b,{to:"/register",children:"Need an account?"})}),Object(b.jsx)("p",{className:"auth__server-error",children:r}),Object(b.jsx)("p",{className:"auth__server-error",children:n}),Object(b.jsxs)("form",{onSubmit:this.handleSubmit,className:"auth__form",children:[Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"username",children:"Email"}),Object(b.jsx)("input",{onChange:this.handleChange,name:"email",value:t,className:"auth__form-control ".concat(s.email&&"auth__error"),type:"email",placeholder:"Enter email",required:!0})]}),s.email?Object(b.jsx)("span",{className:"auth__error-msg",children:s.email}):"",Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"username",children:"Password"}),Object(b.jsx)("input",{onChange:this.handleChange,name:"password",value:a,className:"auth__form-control ".concat(s.password&&"auth__error"),type:"password",placeholder:"Enter password",required:!0})]}),s.password?Object(b.jsx)("span",{className:"auth__error-msg",children:s.password}):"",Object(b.jsx)("button",{type:"submit",className:"btn-large",children:c?Object(b.jsx)(E,{}):"Sign In"})]})]})})}}]),a}(s.Component),H=Object(v.f)(B),G=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(j.a)(this,a),(r=t.call(this,e)).addFile=function(){var e=r.image.current.files[0];r.setState({imageFile:r.image.current.files[0],image:URL.createObjectURL(e)})},r.removeFile=function(){var e=r.state.image;r.setState({image:URL.revokeObjectURL(e)},(function(){r.image.current.value=""}))},r.handleSubmit=function(e){e.preventDefault(),r.setState({isCreating:!0});var t=r.state,a=t.url,s=t.description,n=t.tagList,c=t.imageFile,i=t.stackList,j=t.type,d=new FormData;d.append("url",a),d.append("description",s),d.append("tagList",JSON.stringify(n)),d.append("stackList",JSON.stringify(i)),d.append("type",j),d.append("image",c);var h={method:"POST",headers:{authorization:localStorage.getItem(M)},body:d};fetch(k,h).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,s=a.errors,e.next=7,Promise.reject(s);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=e.portfolio;r.setState({isCreating:!1}),r.props.history.push("/portfolios/".concat(t.id))})).catch((function(){r.setState({requestError:"Not able to create the portfolio",isCreating:!1})}))},r.handleChange=function(e){var t=e.target,a=t.name,s=t.value,n=[],c=[];console.dir(e),"tagInput"===a&&s.includes(",")&&(n=s.trim().split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})),s=""),"stackInput"===a&&s.includes(",")&&(c=s.trim().split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})),s=""),r.setState((function(e){var t,r=e.tagList,i=e.stackList,o=new Set(r.concat(n)),l=new Set(i.concat(c));return t={},Object(N.a)(t,a,s),Object(N.a)(t,"tagList",Array.from(o)),Object(N.a)(t,"stackList",Array.from(l)),t}))},r.handleTagCancel=function(e){var t=r.state.tagList;t=t.filter((function(t){return t!==e})),r.setState({tagList:t})},r.handleStackCancel=function(e){var t=r.state.stackList;t=t.filter((function(t){return t!==e})),r.setState({stackList:t})},r.state={url:"",description:"",image:"",imageFile:null,type:"",tagList:[],stackList:[],tagInput:"",stackInput:"",isCreating:!1,requestError:""},r.image=Object(s.createRef)(),r}return Object(d.a)(a,[{key:"componentWillUnmount",value:function(){var e=this.state.image;URL.revokeObjectURL(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.url,s=t.description,r=t.image,n=t.type,c=t.tagList,i=t.stackList,o=t.tagInput,l=t.stackInput,j=t.isCreating,d=t.requestError;return Object(b.jsx)("section",{className:"editor",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h1",{className:"editor__heading",children:"Add Portfolio"}),Object(b.jsx)("p",{className:"editor__server-error",children:d}),Object(b.jsxs)("form",{className:"editor__form",onSubmit:this.handleSubmit,children:[Object(b.jsxs)("fieldset",{className:"editor__form-group",children:[Object(b.jsx)("label",{className:"editor__form-label",htmlFor:"url",children:"Portfolio url"}),Object(b.jsx)("input",{id:"url",onChange:this.handleChange,name:"url",value:a,className:"editor__form-control",type:"text",placeholder:"Portfolio url",required:!0})]}),Object(b.jsxs)("fieldset",{className:"editor__form-group",children:[Object(b.jsx)("label",{className:"editor__form-label",htmlFor:"description",children:"Write something"}),Object(b.jsx)("textarea",{id:"description",onChange:this.handleChange,name:"description",value:s,className:"editor__form-control",rows:"4",placeholder:"Write something"})]}),Object(b.jsxs)("fieldset",{className:"editor__form-group",children:[Object(b.jsx)("label",{className:"editor__form-label",htmlFor:"tags",children:"Tags"}),Object(b.jsx)("input",{id:"tags",onChange:this.handleChange,onKeyPress:this.handleKeyPress,name:"tagInput",value:o,className:"editor__form-control",type:"text",placeholder:"Press comma ' , ' after typing a tag"}),Object(b.jsx)("ul",{className:"editor__tag-list",children:c.map((function(t,a){return Object(b.jsxs)("li",{className:"editor__tag-default",children:[Object(b.jsx)("span",{onClick:function(){return e.handleTagCancel(t)},className:"editor__close-round",children:"\xd7"}),Object(b.jsx)("strong",{children:t})]},a)}))})]}),Object(b.jsxs)("fieldset",{className:"editor__form-group",children:[Object(b.jsx)("label",{className:"editor__form-label",htmlFor:"stacks",children:"Stacks"}),Object(b.jsx)("input",{id:"stacks",onChange:this.handleChange,name:"stackInput",value:l,className:"editor__form-control",type:"text",placeholder:"Press comma ' , ' after typing a stack"}),Object(b.jsx)("ul",{className:"editor__tag-list",children:i.map((function(t,a){return Object(b.jsxs)("li",{className:"editor__tag-default",children:[Object(b.jsx)("span",{onClick:function(){return e.handleStackCancel(t)},className:"editor__close-round",children:"\xd7"}),Object(b.jsx)("strong",{children:t})]},a)}))})]}),Object(b.jsxs)("fieldset",{className:"editor__form-group",children:[Object(b.jsx)("label",{className:"editor__form-label",htmlFor:"type",children:"Portfolio type"}),Object(b.jsxs)("select",{id:"type",onChange:this.handleChange,name:"type",value:n,className:"editor__form-control",children:[Object(b.jsx)("option",{value:"",children:"Select your portfolio type"}),Object(b.jsx)("option",{value:"animation",children:"Animation"}),Object(b.jsx)("option",{value:"branding",children:"Branding"}),Object(b.jsx)("option",{value:"illustration",children:"Illustration"}),Object(b.jsx)("option",{value:"mobile",children:"Mobile"}),Object(b.jsx)("option",{value:"print",children:"Print"}),Object(b.jsx)("option",{value:"productDesign",children:"Product Design"}),Object(b.jsx)("option",{value:"typography",children:"Typography"}),Object(b.jsx)("option",{value:"webDesign",children:"Web Design"})]})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("fieldset",{className:"editor__form-group",children:r?Object(b.jsxs)("div",{className:"image-preview-div",children:[Object(b.jsx)("img",{className:"image-preview",alt:"subject",src:r}),Object(b.jsx)("span",{className:"image-preview-cancel",onClick:this.removeFile,children:"cancel"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("label",{className:"editor__form-label file-label",htmlFor:"image",children:"\ud83d\uddc2\ufe0f Choose an image or GIF"}),Object(b.jsx)("input",{id:"image",ref:this.image,type:"file",accept:"image/*",onChange:function(t){e.addFile(t)},onClick:function(e){e.target.value=null}})]})}),Object(b.jsx)("button",{className:"btn-large",children:j?Object(b.jsx)(E,{}):"Add Portfolio"})]})]})})}}]),a}(s.Component),V=Object(v.f)(G);var W=function(){return Object(b.jsx)("section",{className:"error-page container full-height",children:Object(b.jsxs)("center",{children:[Object(b.jsx)("img",{className:"error-page__image",src:"/404-error.svg",alt:"no match"}),Object(b.jsx)("h1",{children:"\u2639\ufe0f 404 Page Not Found"}),Object(b.jsx)(u.b,{className:"error-page__link",to:"/",children:"Go back to Home Page"})]})})};var J=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"profile",children:[Object(b.jsxs)("section",{className:"profile-wrapper flex-center",children:[Object(b.jsx)("div",{className:"avatar",children:Object(b.jsx)("img",{className:"profile-avatar",src:"https://cdn.dribbble.com/users/6047818/avatars/small/84b15dbafef241b1493507776816d4b0.jpg?1600202707",alt:"profile-avatar"})}),Object(b.jsxs)("div",{className:"profile-content",children:[Object(b.jsx)("h1",{className:"profile-name",children:"Adrien Rochet"}),Object(b.jsx)("p",{className:"profile-locality",children:"France"}),Object(b.jsx)("p",{className:"profile-specializations",children:"Mobile Design, UI/Visual Design, Product Design"}),Object(b.jsxs)("div",{className:"profile-actions",children:[Object(b.jsx)("a",{className:"btn",href:"/profiles/follow",children:"+ Follow"}),Object(b.jsx)("a",{className:"btn",href:"mailto:abc@gamil.com",children:"\u2709 Hire Me"})]})]})]}),Object(b.jsx)("section",{className:"subnav-container",children:Object(b.jsx)("nav",{className:"subnav",children:Object(b.jsxs)("ul",{className:"subnav-list flex",children:[Object(b.jsx)("li",{className:"subnav-list-item",children:Object(b.jsx)("a",{href:"/",children:"Collections"})}),Object(b.jsx)("li",{className:"subnav-list-item",children:Object(b.jsx)("a",{href:"/",children:"About"})})]})})}),Object(b.jsx)("section",{className:"wrap-inner",children:Object(b.jsxs)("div",{className:"about-content flex",children:[Object(b.jsxs)("div",{className:"about-content-main",children:[Object(b.jsxs)("section",{className:"content-section profile-section-bio",children:[Object(b.jsx)("h2",{className:"section-label",children:"Biography"}),Object(b.jsx)("p",{className:"empty-bio",children:"Adrien Rochet hasn\u2019t added a biography yet \ud83d\ude41"})]}),Object(b.jsxs)("section",{class:"content-section profile-skills",children:[Object(b.jsx)("h2",{className:"section-label",children:"Skills"}),Object(b.jsxs)("ul",{className:"skills-list flex",children:[Object(b.jsx)("li",{class:"btn",children:"css"}),Object(b.jsx)("li",{class:"btn",children:"iphone design"}),Object(b.jsx)("li",{class:"btn",children:"front-end developer"}),Object(b.jsx)("li",{class:"btn",children:"web design"}),Object(b.jsx)("li",{class:"btn",children:"javascript"})]})]}),Object(b.jsxs)("section",{className:"content-section profile-status flex",children:[Object(b.jsx)("span",{children:"200 Followes"}),Object(b.jsx)("span",{children:"90 Following"})]})]}),Object(b.jsxs)("div",{className:"about-content-sidebar",children:[Object(b.jsxs)("section",{className:"content-section profile-info-section",children:[Object(b.jsx)("p",{className:"info-item location",children:"\ud83d\udccc Location"}),Object(b.jsx)("p",{className:"info-item created",children:"\ud83d\udcc5 Memeber since Mar 2011"})]}),Object(b.jsxs)("section",{className:"content-section profile-social-section",children:[Object(b.jsx)("h2",{className:"section-label",children:"Social"}),Object(b.jsxs)("ul",{className:"social-link-list",children:[Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"",children:"\ud83d\ude4e\u200d\u2640\ufe0f dribbble.com/adrienrochet"})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"",children:"\ud83d\ude4e\u200d\u2640\ufe0f twitteer.com/adrienrochet"})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"",children:"\ud83d\ude4e\u200d\u2640\ufe0f facebook.com/adrienrochet"})})]})]})]})]})})]})})};function Y(e){return Object(b.jsxs)(v.c,{children:[Object(b.jsx)(v.a,{path:"/",exact:!0,children:Object(b.jsx)(T,{})}),Object(b.jsx)(v.a,{path:"/profiles/:username",children:Object(b.jsx)(J,{user:e.user})}),Object(b.jsx)(v.a,{path:"/portfolios/:id",children:Object(b.jsx)(q,{user:e.user})}),Object(b.jsx)(v.a,{path:"/editor",children:Object(b.jsx)(V,{})}),Object(b.jsx)(v.a,{path:"*",children:Object(b.jsx)(W,{})})]})}function X(e){return Object(b.jsxs)(v.c,{children:[Object(b.jsx)(v.a,{path:"/",exact:!0,children:Object(b.jsx)(T,{})}),Object(b.jsx)(v.a,{path:"/register",children:Object(b.jsx)(z,{updateUser:e.updateUser})}),Object(b.jsx)(v.a,{path:"/login",children:Object(b.jsx)(H,{updateUser:e.updateUser})}),Object(b.jsx)(v.a,{path:"/profiles/:username",children:Object(b.jsx)(J,{user:e.user})}),Object(b.jsx)(v.a,{path:"/editor",children:Object(b.jsx)(V,{})}),Object(b.jsx)(v.a,{path:"/portfolios/:id",component:q}),Object(b.jsx)(v.a,{path:"*",children:Object(b.jsx)(W,{})})]})}var Z=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(j.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedIn:!1,user:null,isVerifying:!0,isModalOpen:!1},e.updateUser=function(t){e.setState({isLoggedIn:!0,user:t,isVerifying:!1}),localStorage.setItem(M,t.token)},e.deleteUser=function(){e.setState({isLoggedIn:!1,user:null}),localStorage.setItem(M,"")},e.openModal=function(){return e.setState({isModalOpen:!0})},e.closeModal=function(){return e.setState({isModalOpen:!1})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.getItem(M)){var t={method:"GET",headers:{authorization:localStorage.getItem(M)}};fetch("/api/user",t).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,s=a.errors,e.next=7,Promise.reject(s);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){var a=t.user;e.updateUser(a)})).catch((function(t){console.log(t),e.setState({isVerifying:!1})}))}else this.setState({isVerifying:!1})}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,a=e.user,s=e.isVerifying,r=e.isModalOpen;return s?Object(b.jsx)(g,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(O,{isLoggedIn:t,user:a}),t?Object(b.jsx)(Y,{isModalOpen:r,openModal:this.openModal,closeModal:this.closeModal,user:a,updateUser:this.updateUser,deleteUser:this.deleteUser}):Object(b.jsx)(X,{updateUser:this.updateUser,isModalOpen:r,openModal:this.openModal,closeModal:this.closeModal}),Object(b.jsx)(x,{})]})}}]),a}(s.Component),K=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,42)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),r(e),n(e),c(e)}))};c.a.render(Object(b.jsx)(u.a,{children:Object(b.jsx)(Z,{})}),document.getElementById("root")),K()}},[[41,1,2]]]);
//# sourceMappingURL=main.77fa92d6.chunk.js.map