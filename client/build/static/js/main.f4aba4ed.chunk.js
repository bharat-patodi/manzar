(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a.n(r),n=a(24),c=a.n(n),i=a(3),o=a.n(i),l=a(11),d=a(4),u=a(5),j=a(7),h=a(6),m=(a(31),a(2)),b=a(0);function p(){return Object(b.jsxs)("ul",{className:"header__links",children:[Object(b.jsx)("li",{children:Object(b.jsx)(m.c,{className:"header__nav-link",activeClassName:"active",to:"/",exact:!0,children:"Home"})}),Object(b.jsx)("li",{children:Object(b.jsx)(m.c,{className:"header__nav-link",activeClassName:"active",to:"/login",children:"Sign In"})}),Object(b.jsx)("li",{children:Object(b.jsx)(m.c,{className:"header__nav-link",activeClassName:"active",to:"/register",children:"Sign Up"})})]})}function f(e){return Object(b.jsxs)("ul",{className:"header__links",children:[Object(b.jsx)("li",{children:Object(b.jsx)(m.c,{className:"header__nav-link",activeClassName:"active",to:"/",exact:!0,children:"Dashboard"})}),Object(b.jsx)("li",{children:Object(b.jsx)(m.c,{className:"header__nav-link",activeClassName:"active",to:"/editor",children:"New Portfolio"})}),Object(b.jsx)("li",{children:Object(b.jsx)(m.c,{className:"header__nav-link",activeClassName:"active",to:"/settings",children:"Settings"})}),Object(b.jsx)("li",{children:Object(b.jsxs)(m.c,{className:"header__nav-link avatar-div",activeClassName:"active",to:"/profiles/".concat(e.user.username),children:[Object(b.jsx)("img",{src:e.user.avatar||"http://i.imgur.com/Xzm3mI0.jpg",className:"header__avatar",alt:"user avatar"}),e.user.username]})})]})}var v=function(e){return Object(b.jsx)("header",{className:"header",children:Object(b.jsxs)("div",{className:"container flex",children:[Object(b.jsx)(m.b,{className:"header__logo",to:"/",children:"Manzr"}),Object(b.jsx)("nav",{children:e.isLoggedIn?Object(b.jsx)(f,{user:e.user}):Object(b.jsx)(p,{})})]})})};var x=function(e){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsxs)("div",{className:"container flex",children:[Object(b.jsx)("small",{className:"footer__small",children:"Copyright left at the store"}),Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{className:"footer__links",children:[Object(b.jsx)("li",{children:Object(b.jsx)(m.b,{to:"/",children:"Twitter"})}),Object(b.jsx)("li",{children:Object(b.jsx)(m.b,{to:"/",children:"Facebook"})}),Object(b.jsx)("li",{children:Object(b.jsx)(m.b,{to:"/",children:"Instagram"})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"https://github.com/bharat-patodi/manzar",children:"Github"})}),Object(b.jsx)("li",{children:Object(b.jsx)(m.b,{to:"/",children:"Careers"})})]})})]})})};function O(){return Object(b.jsxs)("div",{className:"ripple-loader",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})}var g=a(8),N=a(18);function _(){return Object(b.jsxs)("div",{className:"bouncing-loader",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})}var k=a(17),y=a.n(k),S=a(19),w=a(10),C="/api/portfolios",F="/api/portfolios/feed",P="/api/users/login",U="/api/users",L="/api/user",E="/api/profiles",I="user_token";function D(){return Object(b.jsx)("div",{className:"donut"})}var T=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),r.setState({isCreatingComment:!0});var t=r.props.id,a={body:r.state.commentBody},s={method:"POST",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(I)},body:JSON.stringify({comment:a})};fetch("".concat(C,"/").concat(t,"/comments"),s).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=e.comment,a=Object(N.a)(r.state.comments);a.unshift(t),r.setState({comments:a,isCreatingComment:!1,commentBody:""})})).catch((function(e){r.setState({postRequestError:"Not able to create the comment",isCreatingComment:!1})}))},r.handleChange=function(e){var t=e.target,a=t.name,s=t.value;r.setState(Object(w.a)({},a,s))},r.handleDeleteComment=function(e){r.props.id;var t={method:"DELETE",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(I)}};fetch("".concat(C,"/").concat(e,"/comments/").concat(e),t).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){var t=Object(N.a)(r.state.comments).filter((function(t){return t.userId!==e}));r.setState({comments:t})})).catch((function(e){console.log(e)}))},r.state={Comments:null,fetchRequestError:"",postRequestError:"",commentBody:"",isCreatingComment:!1},r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.id;fetch("".concat(C,"/").concat(t,"/comments"),{authorization:localStorage.getItem(I)}).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.setState({comments:t.comments})})).catch((function(t){e.setState({fetchRequestError:"Not able to fetch the comments"})}))}},{key:"render",value:function(){var e=this.state,t=e.comments,a=(e.error,e.fetchRequestError),r=e.commentBody,s=e.isCreatingComment;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"comment-container",children:[Object(b.jsx)("h1",{className:"title",children:"Feedback"}),Object(b.jsx)("div",{className:"user-comment flex",children:this.props.user?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{className:"user-avatar",src:this.props.user.image||"http://i.imgur.com/Xzm3mI0.jpg",alt:"user-profile-avatar"}),Object(b.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(b.jsx)("textarea",{name:"commentBody",onChange:this.handleChange,value:r,className:"form-control",placeholder:"Write a comment...",rows:"3"}),Object(b.jsx)("button",{className:"standard-btn",children:s?Object(b.jsx)(D,{}):"Submit"})]})]}):""}),Object(b.jsx)(A,{comments:t,fetchRequestError:a,currentUser:this.props.user,handleDeleteComment:this.handleDeleteComment})]})})}}]),a}(s.a.Component);function A(e){var t;return e.fetchRequestError?Object(b.jsx)("p",{className:"api-fetch-error",children:e.fetchRequestError}):e.comments?(null===(t=e.comments)||void 0===t?void 0:t.length)?Object(b.jsx)("div",{className:"display-comment",children:Object(b.jsx)("ul",{className:"comment-list",children:e.comments.map((function(t){var a,r,s,n,c;return Object(b.jsxs)("li",{className:"comment-list-item",children:[Object(b.jsxs)("div",{className:"user-info flex-between",children:[Object(b.jsxs)("div",{className:"user-details flex",children:[Object(b.jsx)(m.b,{to:"/profiles/".concat(null===t||void 0===t||null===(a=t.author)||void 0===a?void 0:a.username),className:"comment-author",children:Object(b.jsx)("img",{src:(null===t||void 0===t||null===(r=t.author)||void 0===r?void 0:r.image)||"http://i.imgur.com/Xzm3mI0.jpg",alt:"user-profile-avatar",className:"user-avatar"})}),Object(b.jsx)("span",{className:"user-name",children:null===t||void 0===t||null===(s=t.author)||void 0===s?void 0:s.username}),Object(b.jsx)("span",{className:"comment-timestamp",children:y()(t.createdAt).format("dddd, MMMM Do YYYY")})]}),(null===e||void 0===e||null===(n=e.currentUser)||void 0===n?void 0:n.username)===(null===t||void 0===t||null===(c=t.author)||void 0===c?void 0:c.username)?Object(b.jsx)("div",{className:"comment-actions",children:Object(b.jsx)("span",{onClick:function(){return e.handleDeleteComment(t.id)},className:"standard-btn",children:"\ud83d\uddd1 Delete"})}):""]}),Object(b.jsx)("div",{className:"comment",children:Object(b.jsx)("p",{children:null===t||void 0===t?void 0:t.body})})]})}))})}):Object(b.jsx)("h5",{className:"no-comments",children:"No comments..."}):Object(b.jsx)(D,{})}var M=Object(g.f)(T),q=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={portfolioList:null,error:""},e.fetchData=function(){var t=e.props.username;fetch("".concat(C,"?author=").concat(t)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){e.setState({portfolioList:t.portfolios,error:""})})).catch((function(t){e.setState({error:"Not able to fetch data"})}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.portfolioList,a=e.error;return a?Object(b.jsx)("p",{children:a}):t?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"more-by-thumbnails",children:[Object(b.jsx)("h3",{className:"thumbnail-label",children:"Portfolios"}),Object(b.jsx)("ul",{className:"thumbnails-list",children:t.map((function(e){return Object(b.jsxs)("li",{className:"thumbnails-list-items",children:[Object(b.jsx)("div",{className:"thumbnails",children:Object(b.jsx)("img",{src:e.image||"https://images.unsplash.com/photo-1612832020542-2b3125530d4a?ixid=MXwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80",alt:"portfolio-title"})}),Object(b.jsx)("div",{className:"thumbnail-portfolio-title",children:e.type||"Personal portfolio"})]},e.id)}))})]})}):Object(b.jsx)(_,{})}}]),a}(s.a.Component),z=Object(g.f)(q),R=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).fetchData=function(){var e,t,a,s=r.props.match.params.username;s===(null===(e=r.props)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.username)&&r.setState({profileUser:null===(a=r.props)||void 0===a?void 0:a.user});fetch("".concat(E,"/").concat(s)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){r.setState({profileUser:e.profile,error:""})})).catch((function(e){r.setState({error:"Not able to fetch data"})}))},r.handleFollowClick=function(e){B(e.username,e.following,r.updateFollowedState)},r.updateFollowedState=function(e){console.log(e),r.setState({profileUser:e})},r.state={profileUser:null,toggleActive:!1,error:""},r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){e.match.params.username!==this.props.match.params.username&&this.fetchData()}},{key:"render",value:function(){var e,t,a,r,s,n,c=this,i=this.state,o=i.profileUser,l=i.error;return l?Object(b.jsx)("p",{className:"api-fetch-error full-height",children:l}):o?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"profile container",children:[Object(b.jsxs)("section",{className:"profile-wrapper flex-center",children:[Object(b.jsx)("div",{className:"avatar",children:Object(b.jsx)("img",{className:"profile-avatar",src:(null===o||void 0===o?void 0:o.avatar)||"http://i.imgur.com/Xzm3mI0.jpg",alt:"profile-avatar"})}),Object(b.jsxs)("div",{className:"profile-content",children:[Object(b.jsx)("h1",{className:"profile-name",children:null===o||void 0===o?void 0:o.name}),Object(b.jsx)("p",{className:"profile-locality",children:null===o||void 0===o?void 0:o.location}),Object(b.jsxs)("div",{className:"profile-actions",children:[Object(b.jsx)("div",{className:"toggle"}),o.username===(null===(e=this.props)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.username)?Object(b.jsx)(m.b,{className:"standard-btn",to:"/settings",children:"Edit profile"}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("button",{onClick:function(){return c.handleFollowClick(o)},className:"standard-btn",children:[Object(b.jsx)("img",{className:"follow-icon",src:"/images/plus.svg",alt:"follow"}),o.following?"Unfollow":"Follow"," "]}),Object(b.jsx)("a",{href:"mailto:abc@gamil.com",children:Object(b.jsxs)("button",{className:"standard-btn",children:[Object(b.jsx)("img",{className:"mail-icon",src:"/images/mail.svg",alt:"mail"}),"Hire Me"]})})]})]})]})]}),Object(b.jsx)("section",{className:"wrap-inner",children:Object(b.jsxs)("div",{className:"about-content flex",children:[Object(b.jsxs)("div",{className:"about-content-main",children:[Object(b.jsxs)("section",{className:"content-section profile-section-bio",children:[Object(b.jsx)("h2",{className:"section-label",children:"About Me"}),Object(b.jsx)("p",{className:"empty-description",children:(null===o||void 0===o?void 0:o.bio)||"".concat(null===o||void 0===o?void 0:o.name," hasn\u2019t added a biography yet \ud83d\ude41")})]}),Object(b.jsxs)("section",{class:"content-section profile-skills",children:[Object(b.jsx)("h2",{className:"section-label",children:"Skills"}),Object(b.jsx)("ul",{className:"skills-list flex",children:(null===o||void 0===o?void 0:o.stackList)?null===o||void 0===o?void 0:o.stackList.map((function(e){return Object(b.jsx)("li",{class:"skill-btn",children:e})})):""})]}),Object(b.jsx)("span",{className:"profile-status flex"}),Object(b.jsx)(z,{username:o.username})]}),Object(b.jsxs)("div",{className:"about-content-sidebar",children:[Object(b.jsxs)("section",{className:"content-section profile-info-section",children:[Object(b.jsxs)("p",{className:"info-item location",children:[Object(b.jsx)("img",{className:"sidebar-icon",src:"/images/location.svg",alt:"location"})," ",(null===o||void 0===o?void 0:o.location)||Object(b.jsx)("span",{className:"empty",children:"Not added"})]}),Object(b.jsxs)("p",{className:"info-item created",children:[Object(b.jsx)("img",{className:"sidebar-icon",src:"/images/id-card.svg",alt:"location"}),"Member since \n                    ".concat(y()(null===o||void 0===o?void 0:o.createdAt).format("MMMM YYYY"))]})]}),Object(b.jsxs)("section",{className:"content-section profile-social-section",children:[Object(b.jsx)("h2",{className:"section-label",children:"Social"}),Object(b.jsxs)("ul",{className:"social-link-list",children:[Object(b.jsx)("li",{children:Object(b.jsxs)("a",{href:"",children:[Object(b.jsx)("img",{className:"social-icon",src:"/images/linkedin.svg",alt:"mail"}),(null===o||void 0===o||null===(a=o.socialLinks)||void 0===a?void 0:a.linkedin)||Object(b.jsx)("span",{className:"empty",children:"Not added"})]})}),Object(b.jsx)("li",{children:Object(b.jsxs)("a",{href:"",children:[Object(b.jsx)("img",{className:"social-icon",src:"/images/twitter.svg",alt:"mail"}),(null===o||void 0===o||null===(r=o.socialLinks)||void 0===r?void 0:r.twitter)||Object(b.jsx)("span",{className:"empty",children:"Not added"})]})}),Object(b.jsx)("li",{children:Object(b.jsxs)("a",{href:"",children:[Object(b.jsx)("img",{className:"social-icon",src:"/images/github.svg",alt:"mail"}),(null===o||void 0===o||null===(s=o.socialLinks)||void 0===s?void 0:s.github)||Object(b.jsx)("span",{className:"empty",children:"Not added"})]})}),Object(b.jsx)("li",{children:Object(b.jsxs)("a",{href:"",children:[Object(b.jsx)("img",{className:"social-icon",src:"/images/medium.svg",alt:"medium"}),(null===o||void 0===o||null===(n=o.socialLinks)||void 0===n?void 0:n.medium)||Object(b.jsx)("span",{className:"empty",children:"Not added"})]})})]})]})]})]})})]})}):Object(b.jsx)("div",{className:"full-height",children:Object(b.jsx)(O,{})})}}]),a}(s.a.Component);function B(e,t,a){var r;r=t?{method:"DELETE",headers:{authorization:localStorage.getItem(I)}}:{method:"POST",headers:{authorization:localStorage.getItem(I)}},fetch("".concat(E,"/").concat(e,"/follow"),r).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=e.profile;return a(t)})).catch((function(e){console.log(e)}))}var X=Object(g.f)(R),G=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(d.a)(this,a),console.log(e),(r=t.call(this,e)).fetchData=function(){var e=r.props.match.params.id;localStorage.getItem(I);fetch("".concat(C,"/").concat(e)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){r.setState({portfolio:e.portfolio,error:""})})).catch((function(e){r.setState({error:"Not able to fetch data"})}))},r.handleFavoriteClick=function(){var e=r.state.portfolio;H(e.id,e.favorited,r.updateFavoritedState)},r.handleFollowClick=function(e){B(e.username,e.following,r.updateFollowedState)},r.updateFavoritedState=function(e){r.setState({portfolio:e})},r.updateFollowedState=function(e){var t=Object(S.a)({},r.state.portfolio);t.author=e,r.setState({portfolio:t})},r.closeModal=function(){r.props.history.goBack()},r.state={portfolio:null,error:""},r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.portfolio,r=t.error,s=this.props.user;return r?Object(b.jsx)("p",{className:"api-fetch-error",children:r}):a?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"overlay",children:[Object(b.jsx)("div",{className:"overlay__close-button",children:Object(b.jsx)("button",{className:"close-btn",onClick:this.closeModal,children:"x"})}),Object(b.jsx)("div",{className:"overlay__modal",children:Object(b.jsxs)("div",{className:"overlay__modal-container",children:[Object(b.jsxs)("div",{className:"overlay__modal-content-container",children:[Object(b.jsx)("div",{className:"modal__user",children:Object(b.jsxs)("div",{className:"user-info flex-between",children:[Object(b.jsxs)("div",{className:"user-info__container",children:[Object(b.jsx)(m.b,{to:"/profiles/".concat(a.author.username),children:Object(b.jsx)("img",{className:"user-avatar",src:a.image||"http://i.imgur.com/Xzm3mI0.jpg",alt:"user-profile-avatar"})}),Object(b.jsxs)("div",{className:"user-info__header-details",children:[Object(b.jsx)("h1",{className:"portfolio-title",children:a.title||"Personal portfolio website"}),Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)(m.b,{to:"/profiles/".concat(a.author.username),children:Object(b.jsx)("h4",{className:"user-link",children:a.author.name})}),Object(b.jsxs)("button",{onClick:function(){return e.handleFollowClick(a.author)},className:"follow-user",children:[a.author.following?"Unfollow":"Follow"," "]})]})]})]}),Object(b.jsxs)("div",{className:"user-info__header-actions",children:[Object(b.jsx)("a",{href:a.url,children:Object(b.jsx)("button",{className:"standard-btn",children:"Portfolio"})}),Object(b.jsxs)("button",{onClick:function(){return e.handleFavoriteClick()},className:"portfolio-card__btn-fv ".concat(a.favorited?"active":""),children:[Object(b.jsx)("span",{className:"ion-heart",children:"\u2764\ufe0f"})," ",a.favoritesCount]})]})]})}),Object(b.jsx)("div",{className:"modal__portfolio",children:Object(b.jsx)("iframe",{title:"portfolio",src:a.url,frameBorder:"0",className:"portfolio-preview",height:"600%",width:"100%"})}),Object(b.jsxs)("section",{className:"description-container",children:[Object(b.jsx)("p",{children:a.author.description}),Object(b.jsxs)("p",{children:["I am available for work :",Object(b.jsx)("br",{}),Object(b.jsx)("a",{href:"mailto:".concat(a.author.email),children:a.author.email})]})]}),Object(b.jsx)("section",{className:"feedback-section",children:Object(b.jsx)(M,{id:a.id,user:s})})]}),Object(b.jsxs)("section",{className:"user-details-section",children:[Object(b.jsxs)("div",{className:"user-avatar-container flex",children:[Object(b.jsx)("span",{className:"user-avatar-line"}),Object(b.jsx)(m.b,{to:"/profiles/".concat(a.author.username),children:Object(b.jsx)("img",{className:"user-avatar",src:a.image||"http://i.imgur.com/Xzm3mI0.jpg",alt:"user-profile-avatar"})}),Object(b.jsx)("span",{className:"user-avatar-line"})]}),Object(b.jsx)(m.b,{to:"/profiles/".concat(a.author.username),children:Object(b.jsx)("h4",{className:"user-link",children:a.author.name})}),Object(b.jsx)("div",{className:"user-bio",children:a.author.bio})]})]})})]})}):Object(b.jsx)("div",{className:"full-height",children:Object(b.jsx)(O,{})})}}]),a}(s.a.Component);function H(e,t,a){var r;r=t?{method:"DELETE",headers:{authorization:localStorage.getItem(I)}}:{method:"POST",headers:{authorization:localStorage.getItem(I)}},fetch("".concat(C,"/").concat(e,"/favorite"),r).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=e.portfolio;return a(t)})).catch((function(e){console.log(e)}))}var Y=Object(g.f)(G),V=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={portfolioList:null,activePageIndex:0,portfolioPerPage:20,error:""},e.updateData=function(){var t=e.props,a=t.activeFeed,r=t.username,s=t.activeTag,n=e.state,c=n.activePageIndex,i=n.portfolioPerPage,d=C,u="limit=".concat(i,"&offset=").concat(i*c);s&&(u+="&tag=".concat(s)),"personal"===a?d=F:"favorited"===a?u+="&favorited=".concat(r):"profileFeed"===a&&(u+="&author=".concat(r));var j={method:"GET",headers:{"Content-Type":"application/json",authorization:localStorage.user_token?localStorage.getItem(I):""}};fetch("".concat(d,"?").concat(u),j).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.setState((function(e){var a=e.portfolioList;return{portfolioList:a?a.concat(t.portfolios):t.portfolios}}))})).catch((function(t){e.setState({error:"Not able to fetch portfolios"})}))},e.handlePageClick=function(t){e.setState({activePageIndex:t})},e.handleFavoriteClick=function(t){var a=e.state.portfolioList.find((function(e){return e.id===t}));H(a.id,a.favorited,e.updateFavoritedState)},e.updateFavoritedState=function(t){var a=Object(N.a)(e.state.portfolioList),r=a.find((function(e){return e.id===t.id}));r.favorited=t.favorited,r.favoritesCount=t.favoritesCount,e.setState({portfolioList:a})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.activeFeed===this.props.activeFeed&&t.activePageIndex===this.state.activePageIndex||this.setState((function(t){var r=t.activePageIndex;return{portfolioList:null,activePageIndex:e.activeFeed!==a.props.activeFeed?0:r}}),(function(){a.updateData()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.portfolioList,r=(t.activePageIndex,t.portfolioPerPage,t.error);return r?Object(b.jsx)("p",{className:"article-preview",children:r}):a||r?(null===a||void 0===a?void 0:a.length)?Object(b.jsx)(b.Fragment,{children:a.map((function(t,a){var r,s,n;return Object(b.jsxs)("div",{className:"portfolio-card",children:[Object(b.jsxs)("div",{className:"portfolio-card__meta",children:[Object(b.jsxs)(m.b,{to:"/profiles/".concat(t.author.username),className:"portfolio-card__profile",children:[Object(b.jsx)("img",{src:t.author.avatar||"http://i.imgur.com/Xzm3mI0.jpg",alt:"avatar"}),Object(b.jsxs)("div",{className:"portfolio-card__names",children:[Object(b.jsx)("h6",{children:t.author.name}),Object(b.jsxs)("p",{children:["@",t.author.username]})]})]}),Object(b.jsxs)("div",{className:"portfolio-card__info",children:[Object(b.jsx)("h5",{className:"portfolio-card__type",children:null!==(r=t.type)&&void 0!==r?r:"Personal portfolio"}),Object(b.jsxs)("p",{className:"portfolio-card__avail",children:[Object(b.jsx)("span",{className:"portfolio-card__avail-sign ".concat(t.author.availability?"active":"")}),t.author.availability?"Available":"Not available"]})]})]}),Object(b.jsx)(m.b,{to:"portfolios/".concat(t.id),children:Object(b.jsx)("img",{className:"portfolio-card__preview",src:null!==(s=t.image)&&void 0!==s?s:"https://images.unsplash.com/photo-1612832020542-2b3125530d4a?ixid=MXwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80",alt:"portfolio preview"})}),Object(b.jsxs)("div",{className:"portfolio-card__meta-bottom",children:[Object(b.jsxs)("p",{children:[Object(b.jsx)("img",{className:"follow-icon",src:"/images/location.svg",alt:"follow"})," ",null!==(n=t.author.location)&&void 0!==n?n:"Any where"]}),Object(b.jsxs)("button",{onClick:function(){return e.handleFavoriteClick(t.id)},className:"portfolio-card__btn-fv ".concat(t.favorited?"active":""),children:[Object(b.jsx)("span",{className:"ion-heart",children:Object(b.jsx)("img",{className:"fav-icon",src:"/images/heart.svg",alt:"follow"})})," ",t.favoritesCount]})]})]},a)}))}):Object(b.jsx)("h3",{className:"article-preview",children:"No portfolios..."}):Object(b.jsx)(_,{})}}]),a}(r.Component),W=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={tagList:null,error:""},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/tags").then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.setState({tagList:t.tags.filter((function(e){return e}))})})).catch((function(t){e.setState({error:"Not able to fetch tags"})}))}},{key:"render",value:function(){var e=this.state,t=e.tagList,a=e.error,r=this.props,s=r.activeTag,n=r.handleTagClick;return a?Object(b.jsx)("p",{className:"",children:a}):t?(null===t||void 0===t?void 0:t.length)?Object(b.jsx)("ul",{className:"tag-list",children:t.map((function(e,t){return Object(b.jsx)("li",{onClick:function(){return n(e)},className:"tag ".concat(s===e?"active":""),children:e},t)}))}):Object(b.jsx)("h5",{children:"No tags..."}):Object(b.jsx)(_,{})}}]),a}(r.Component),J=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={activeFeed:"global",activeTag:""},e.handleFeedClick=function(t){t!==e.state.activeTag&&e.setState({activeFeed:t,activeTag:""})},e.handleTagClick=function(t){e.setState({activeTag:t,activeFeed:t})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.activeFeed,r=t.activeTag;return Object(b.jsxs)("main",{className:"home",children:[Object(b.jsx)("section",{className:"hero",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h1",{children:"Portfolio is a box of chocolates!"}),Object(b.jsx)(m.b,{to:"/editor",children:Object(b.jsx)("button",{className:"btn-large",children:"Add Portfolio"})})]})}),Object(b.jsx)("section",{className:"dashboard",children:Object(b.jsxs)("div",{className:"container flex",children:[Object(b.jsxs)("div",{className:"home__portfolios",children:[Object(b.jsxs)("ul",{className:"home__feed-btns",children:[Object(b.jsx)("li",{onClick:function(){return e.handleFeedClick("global")},className:"home__feed-btn ".concat("global"===a?"active":""),children:"All"}),r?Object(b.jsxs)("li",{onClick:function(){return e.handleFeedClick(r)},className:"home__feed-btn ".concat(a===r?"active":""),children:["#",r]}):""]}),Object(b.jsx)(V,{activeFeed:a,activeTag:r})]}),Object(b.jsx)("aside",{className:"home__sidebar",children:Object(b.jsxs)("div",{className:"home__tag-container",children:[Object(b.jsx)("p",{className:"heading",children:"Popular Tags"}),Object(b.jsx)(W,{handleTagClick:this.handleTagClick,activeTag:r})]})})]})})]})}}]),a}(r.Component),Z=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={name:"",username:"",email:"",password:"",errors:{name:"",username:"",email:"",password:""},requestError:"",validationError:"",isRegistering:!1},e.handleSubmit=function(t){t.preventDefault(),e.setState({isRegistering:!0});var a=e.state,r={name:a.name,username:a.username,email:a.email,password:a.password},s=e.state.errors;if(!s.name&&!s.username&&!s.email&&!s.password){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:r})};fetch(U,n).then((function(e){if(422!==e.status&&!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){if(t.errors){var a=t.errors.body[0];e.setState({validationError:a.includes("email")?"Email is already exist":"Username is already exist"})}else e.props.updateUser(t.user),e.props.history.push("/");e.setState({isRegistering:!1})})).catch((function(t){e.setState({requestError:"Not able to login",isRegistering:!1})}))}},e.handleChange=function(t){var a,r=t.target,s=r.name,n=r.value,c=e.state.errors;K(n,s,c),e.setState((a={},Object(w.a)(a,s,n),Object(w.a)(a,"errors",c),a))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.username,r=e.email,s=e.password,n=e.errors,c=e.validationError,i=e.requestError,o=e.isRegistering;return Object(b.jsx)("section",{className:"full-height auth",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h1",{className:"auth__heading",children:"Sign up"}),Object(b.jsx)("p",{className:"auth__link",children:Object(b.jsx)(m.b,{to:"/login",children:"Have an account?"})}),Object(b.jsx)("p",{className:"auth__server-error",children:c}),Object(b.jsx)("p",{className:"auth__server-error",children:i}),Object(b.jsxs)("form",{onSubmit:this.handleSubmit,className:"auth__form",children:[Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"name",children:"Full Name"}),Object(b.jsx)("input",{id:"name",onChange:this.handleChange,name:"name",value:t,className:"auth__form-control ".concat(n.name&&"auth__error"),type:"text",placeholder:"Enter name",required:!0})]}),n.name?Object(b.jsx)("span",{className:"auth__error-msg",children:n.name}):"",Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"username",children:"Username"}),Object(b.jsx)("input",{id:"username",onChange:this.handleChange,name:"username",value:a,className:"auth__form-control ".concat(n.username&&"auth__error"),type:"text",placeholder:"Enter username",required:!0})]}),n.username?Object(b.jsx)("span",{className:"auth__error-msg",children:n.username}):"",Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"username",children:"Email"}),Object(b.jsx)("input",{onChange:this.handleChange,name:"email",value:r,className:"auth__form-control ".concat(n.email&&"auth__error"),type:"email",placeholder:"Enter email",required:!0})]}),n.email?Object(b.jsx)("span",{className:"auth__error-msg",children:n.email}):"",Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"username",children:"Password"}),Object(b.jsx)("input",{onChange:this.handleChange,name:"password",value:s,className:"auth__form-control ".concat(n.password&&"auth__error"),type:"password",placeholder:"Enter password",required:!0})]}),n.password?Object(b.jsx)("span",{className:"auth__error-msg",children:n.password}):"",Object(b.jsx)("button",{type:"submit",className:"btn-large",children:o?Object(b.jsx)(D,{}):"Sign up"})]})]})})}}]),a}(r.Component);function K(e,t,a){switch(t){case"name":a.name=e.length?"":"Name is required";break;case"username":a.username=e.length?e.length>=6?"":"Username must be atleast 6 characters":"Username is required";break;case"email":a.email=e.length?/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?"":"Email is invalid":"Email is required";break;case"password":a.password=e.length?/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/.test(e)?e.length<6?"Password must contain atleast 6 characters":"":"Password must contain a letter, a number":"Password is required"}}var $=Object(g.f)(Z),Q=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:"",errors:{email:"",password:""},requestError:"",validationError:"",isLogging:!1},e.handleSubmit=function(t){t.preventDefault(),e.setState({isLogging:!0});var a=e.state,r={email:a.email,password:a.password},s=e.state.errors;if(!s.email&&!s.password){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:r})};fetch(P,n).then((function(e){if(422!==e.status&&!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){t.errors?e.setState({validationError:t.errors.body[0]}):(e.props.updateUser(t.user),e.props.history.push("/")),e.setState({isLogging:!1})})).catch((function(t){e.setState({requestError:"Not able to login",isLogging:!1})}))}},e.handleChange=function(t){var a,r=t.target,s=r.name,n=r.value,c=e.state.errors;K(n,s,c),e.setState((a={},Object(w.a)(a,s,n),Object(w.a)(a,"errors",c),a))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,r=e.errors,s=e.validationError,n=e.requestError,c=e.isLogging;return Object(b.jsx)("section",{className:"full-height auth",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h1",{className:"auth__heading",children:"Sign In"}),Object(b.jsx)("p",{className:"auth__link",children:Object(b.jsx)(m.b,{to:"/register",children:"Need an account?"})}),Object(b.jsx)("p",{className:"auth__server-error",children:s}),Object(b.jsx)("p",{className:"auth__server-error",children:n}),Object(b.jsxs)("form",{onSubmit:this.handleSubmit,className:"auth__form",children:[Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"username",children:"Email"}),Object(b.jsx)("input",{onChange:this.handleChange,name:"email",value:t,className:"auth__form-control ".concat(r.email&&"auth__error"),type:"email",placeholder:"Enter email",required:!0})]}),r.email?Object(b.jsx)("span",{className:"auth__error-msg",children:r.email}):"",Object(b.jsxs)("fieldset",{className:"auth__form-group",children:[Object(b.jsx)("label",{className:"auth__form-label",htmlFor:"username",children:"Password"}),Object(b.jsx)("input",{onChange:this.handleChange,name:"password",value:a,className:"auth__form-control ".concat(r.password&&"auth__error"),type:"password",placeholder:"Enter password",required:!0})]}),r.password?Object(b.jsx)("span",{className:"auth__error-msg",children:r.password}):"",Object(b.jsx)("button",{type:"submit",className:"btn-large",children:c?Object(b.jsx)(D,{}):"Sign In"})]})]})})}}]),a}(r.Component),ee=Object(g.f)(Q),te=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).addFile=function(){var e=s.image.current.files[0];s.setState({imageFile:s.image.current.files[0],image:URL.createObjectURL(e)})},s.removeFile=function(){var e=s.state.image;s.setState({image:URL.revokeObjectURL(e)},(function(){s.image.current.value=""}))},s.handleSubmit=function(e){e.preventDefault(),s.setState({isCreating:!0});var t=s.state,a=t.url,r=t.description,n=t.tagList,c=t.imageFile,i=t.type,d=new FormData;d.append("url",a),d.append("description",r),d.append("tagList",JSON.stringify(n)),d.append("type",i),d.append("image",c);var u={method:"POST",headers:{authorization:localStorage.getItem(I)},body:d};fetch(C,u).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=e.portfolio;s.setState({isCreating:!1}),s.props.history.push("/portfolios/".concat(t.id))})).catch((function(){s.setState({requestError:"Not able to create the portfolio",isCreating:!1})}))},s.handleChange=function(e){var t=e.target,a=t.name,r=t.value,n=[];console.dir(e),"tagInput"===a&&r.includes(",")&&(n=r.trim().split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})),r=""),s.setState((function(e){var t,s=e.tagList,c=new Set(s.concat(n));return t={},Object(w.a)(t,a,r),Object(w.a)(t,"tagList",Array.from(c)),t}))},s.handleTagCancel=function(e){var t=s.state.tagList;t=t.filter((function(t){return t!==e})),s.setState({tagList:t})},s.state={url:"",description:"",image:"",imageFile:null,type:"",tagList:[],tagInput:"",stackInput:"",isCreating:!1,requestError:""},s.image=Object(r.createRef)(),s}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){var e=this.state.image;URL.revokeObjectURL(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.url,r=t.description,s=t.image,n=t.type,c=t.tagList,i=(t.stackList,t.tagInput),o=(t.stackInput,t.isCreating),l=t.requestError;return Object(b.jsx)("section",{className:"editor",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h1",{className:"editor__heading",children:"Add Portfolio"}),Object(b.jsx)("p",{className:"editor__server-error",children:l}),Object(b.jsxs)("form",{className:"editor__form",onSubmit:this.handleSubmit,children:[Object(b.jsxs)("fieldset",{className:"editor__form-group",children:[Object(b.jsx)("label",{className:"editor__form-label",htmlFor:"url",children:"Portfolio url"}),Object(b.jsx)("input",{id:"url",onChange:this.handleChange,name:"url",value:a,className:"editor__form-control",type:"text",placeholder:"Portfolio url",required:!0})]}),Object(b.jsxs)("fieldset",{className:"editor__form-group",children:[Object(b.jsx)("label",{className:"editor__form-label",htmlFor:"description",children:"Write something"}),Object(b.jsx)("textarea",{id:"description",onChange:this.handleChange,name:"description",value:r,className:"editor__form-control",rows:"4",placeholder:"Write something"})]}),Object(b.jsxs)("fieldset",{className:"editor__form-group",children:[Object(b.jsx)("label",{className:"editor__form-label",htmlFor:"tags",children:"Tags"}),Object(b.jsx)("input",{id:"tags",onChange:this.handleChange,onKeyPress:this.handleKeyPress,name:"tagInput",value:i,className:"editor__form-control",type:"text",placeholder:"Press comma ' , ' after typing a tag"}),Object(b.jsx)("ul",{className:"editor__tag-list",children:c.map((function(t,a){return Object(b.jsxs)("li",{className:"editor__tag-default",children:[Object(b.jsx)("span",{onClick:function(){return e.handleTagCancel(t)},className:"editor__close-round",children:"\xd7"}),Object(b.jsx)("strong",{children:t})]},a)}))})]}),Object(b.jsxs)("fieldset",{className:"editor__form-group",children:[Object(b.jsx)("label",{className:"editor__form-label",htmlFor:"type",children:"Portfolio type"}),Object(b.jsxs)("select",{id:"type",onChange:this.handleChange,name:"type",value:n,className:"editor__form-control",children:[Object(b.jsx)("option",{value:"",children:"Select your portfolio type"}),Object(b.jsx)("option",{value:"animation",children:"Animation"}),Object(b.jsx)("option",{value:"branding",children:"Branding"}),Object(b.jsx)("option",{value:"illustration",children:"Illustration"}),Object(b.jsx)("option",{value:"mobile",children:"Mobile"}),Object(b.jsx)("option",{value:"print",children:"Print"}),Object(b.jsx)("option",{value:"productDesign",children:"Product Design"}),Object(b.jsx)("option",{value:"typography",children:"Typography"}),Object(b.jsx)("option",{value:"webDesign",children:"Web Design"})]})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("fieldset",{className:"editor__form-group",children:s?Object(b.jsxs)("div",{className:"image-preview-div",children:[Object(b.jsx)("img",{className:"image-preview",alt:"subject",src:s}),Object(b.jsx)("span",{className:"image-preview-cancel",onClick:this.removeFile,children:"cancel"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("label",{className:"editor__form-label file-label",htmlFor:"image",children:"\ud83d\uddc2\ufe0f Choose an image or GIF"}),Object(b.jsx)("input",{id:"image",ref:this.image,type:"file",accept:"image/*",onChange:function(t){e.addFile(t)},onClick:function(e){e.target.value=null}})]})}),Object(b.jsx)("button",{className:"btn-large",children:o?Object(b.jsx)(D,{}):"Add Portfolio"})]})]})})}}]),a}(r.Component),ae=Object(g.f)(te);function re(e){var t,a,r,s,n;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{className:"edit-public-profile",onSubmit:e.handleSubmit,children:[Object(b.jsx)("div",{className:"form-field",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"profile_name",className:"profile-name",children:"Name"}),Object(b.jsx)("input",{onChange:e.handleChange,type:"text",value:null===e||void 0===e?void 0:e.name,name:"name"}),Object(b.jsx)("p",{className:"error",children:null===(t=e.errors)||void 0===t?void 0:t.name})]})}),Object(b.jsx)("div",{className:"form-field",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"profile_location",children:"Location"}),Object(b.jsx)("input",{onChange:e.handleChange,type:"text",value:null===e||void 0===e?void 0:e.location,name:"location"})]})}),Object(b.jsx)("div",{className:"bio",children:Object(b.jsx)("div",{className:"form-field",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"profile_bio",children:"Bio"}),Object(b.jsx)("textarea",{onChange:e.handleChange,name:"bio",maxLength:"1000",placeholder:"Brief description for your profile.",rows:"8",defaultValue:null===e||void 0===e?void 0:e.bio})]})})}),Object(b.jsx)("div",{className:"skills",children:Object(b.jsx)("div",{className:"form-field",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"profile_skills",children:"Skills"}),Object(b.jsx)("input",{id:"profile_skills",onChange:e.handleChange,type:"text",value:e.skills,name:"skills",placeholder:"Enter ',' comma to add skills"}),Object(b.jsx)("ul",{className:"editor__tag-list",children:e.stackList.map((function(t,a){return Object(b.jsxs)("li",{className:"editor__tag-default",children:[Object(b.jsx)("span",{onClick:function(){return e.handleStackCancel(t)},className:"editor__close-round",children:"\xd7"}),Object(b.jsx)("strong",{children:t})]},a)}))})]})})}),Object(b.jsxs)("div",{className:"edit-social-media",children:[Object(b.jsx)("h3",{className:"social-media-heading",children:"Social Profiles"}),Object(b.jsx)("div",{className:"form-field",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"profile_twitter",children:"Twitter"}),Object(b.jsx)("input",{onChange:e.handleChange,value:null===e||void 0===e||null===(a=e.socials)||void 0===a?void 0:a.twitter,type:"text",name:"twitter"})]})}),Object(b.jsx)("div",{className:"form-field",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"profile_linkedin",children:"Linkedin"}),Object(b.jsx)("input",{onChange:e.handleChange,value:null===e||void 0===e||null===(r=e.socials)||void 0===r?void 0:r.linkedin,type:"text",name:"linkedin"})]})}),Object(b.jsx)("div",{className:"form-field",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"profile_github",children:"Github"}),Object(b.jsx)("input",{onChange:e.handleChange,type:"text",value:null===e||void 0===e||null===(s=e.socials)||void 0===s?void 0:s.github,name:"github"})]})}),Object(b.jsx)("div",{className:"form-field",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"profile_medium",children:"Medium"}),Object(b.jsx)("input",{onChange:e.handleChange,type:"text",value:null===e||void 0===e||null===(n=e.socials)||void 0===n?void 0:n.medium,name:"medium"})]})})]}),Object(b.jsx)("div",{className:"add-btn",children:Object(b.jsx)("button",{className:"standard-btn hero-btn margin-top",type:"submit",children:e.isUpdating?Object(b.jsx)(D,{}):"Save Profile"})})]})})}var se=function(e){var t,a;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{className:"edit-public-profile",onSubmit:e.handleSubmit,children:[Object(b.jsx)("div",{className:"form-field",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{htmlFor:"profile_username",className:"profile-username",children:"Username"}),Object(b.jsx)("input",{onChange:e.handleChange,id:"profile_username",type:"text",value:e.username,name:"username"}),Object(b.jsx)("p",{className:"error",children:null===(t=e.errors)||void 0===t?void 0:t.username})]})}),Object(b.jsx)("div",{className:"form-field",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("label",{for:"profile_email",children:"Email"}),Object(b.jsx)("input",{onChange:e.handleChange,id:"profile_email",type:"email",value:e.email,name:"email"}),Object(b.jsx)("p",{className:"error",children:null===(a=e.errors)||void 0===a?void 0:a.password})]})}),Object(b.jsxs)("div",{className:"account-section",children:[Object(b.jsx)("h3",{className:"account-section-heading",children:"Account Changes"}),Object(b.jsxs)("div",{className:"wrapper flex-between",children:[Object(b.jsx)("div",{className:"flex-column",children:Object(b.jsx)("p",{className:"standard-btn sign-out",onClick:e.deleteUser,children:"Sign Out"})}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)("button",{className:"standard-btn hero-btn",type:"submit",children:e.isUpdating?Object(b.jsx)(D,{}):"Save Profile"})})]})]})]})})},ne=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).handleAvatarSubmit=function(e){e.preventDefault(),s.setState({isUpdatingAvatar:!0});var t=s.state.avatar,a=new FormData;a.append("avatar",t);var r={method:"PUT",headers:{authorization:localStorage.getItem(I)},body:a};fetch(L,r).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){console.log(e.errors),e.errors?s.setState({validationError:"No able to update avatar"}):s.props.updateUser(e.user),s.setState({isUpdatingAvatar:!1,avatarUpdateMsg:"Avatar is Updated"})})).catch((function(e){console.log(e),s.setState({requestError:"Not able to update avatar",isUpdatingAvatar:!1})}))},s.handleSubmit=function(e){e.preventDefault(),s.setState({isUpdating:!0});var t=s.state,a={username:t.username,email:t.email,location:t.location,name:t.name,bio:t.bio,socials:t.socials,stackList:t.stackList},r=s.state.errors;if(!r.name&&!r.username&&!r.email&&!r.password){var n={method:"PUT",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(I)},body:JSON.stringify({user:a})};fetch(L,n).then((function(e){if(console.log(e),422!==e.status&&!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){if(e.errors){var t=e.errors.body[0];s.setState({validationError:t.includes("email")?"Email is already exist":"Username is already exist"})}else s.props.updateUser(e.user),s.props.history.push("/profiles/".concat(e.user.username));s.setState({isUpdating:!1})})).catch((function(e){s.setState({requestError:"Not able to Update",isUpdating:!1})}))}},s.handleChange=function(e){var t=e.target,a=t.name,r=t.value,n=s.state.errors,c={},i=[];switch(K(r,a,n),"skills"===a&&r.includes(",")&&(i=r.trim().split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})),r=""),a){case"twitter":case"github":case"medium":case"linkedin":c[a]=r}s.setState((function(e){var t,s=e.stackList,o=new Set(s.concat(i));return t={},Object(w.a)(t,a,r),Object(w.a)(t,"socials",c),Object(w.a)(t,"errors",n),Object(w.a)(t,"stackList",Array.from(o)),t}))},s.addFile=function(){var e=s.avatar.current.files[0];s.setState({avatar:s.avatar.current.files[0],avatarPreview:URL.createObjectURL(e)})},s.changeSettings=function(e){s.setState({activeSetting:e})},s.handleStackCancel=function(e){var t=s.state.stackList;t=t.filter((function(t){return t!==e})),s.setState({stackList:t})},s.state={activeSetting:"Public Profile",stackList:[],name:"",username:"",email:"",location:"",bio:"",skills:"",socials:null,avatar:null,avatarPreview:null,errors:{name:"",username:"",email:"",password:""},validationError:"",requestError:"",isUpdating:!1,isUpdatingAvatar:!1,avatarUpdateMsg:""},s.avatar=Object(r.createRef)(),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState(Object(S.a)({},this.props.user))}},{key:"componentWillUnmount",value:function(){var e=this.state.avatarPreview;this.setState({avatarUpdateMsg:""}),URL.revokeObjectURL(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,r=t.email,s=t.location,n=t.name,c=t.bio,i=t.avatarPreview,o=t.avatar,l=t.socials,d=t.isUpdating,u=t.validationError,j=t.requestError,h=t.isUpdatingAvatar,p=t.avatarUpdateMsg,f=t.errors,v=t.stackList,x=t.skills;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"profile-setting",children:[Object(b.jsxs)("div",{className:"user-profile-header flex",children:[Object(b.jsx)("div",{className:"avatar",children:Object(b.jsx)(m.b,{to:"/profiles/".concat(a),children:Object(b.jsx)("img",{className:"user-avatar",src:null!==o&&void 0!==o?o:"http://i.imgur.com/Xzm3mI0.jpg",alt:"profile-avatar"})})}),Object(b.jsx)("h1",{children:n})]}),Object(b.jsx)("p",{className:"error server",children:u}),Object(b.jsx)("p",{className:"error server",children:j}),Object(b.jsxs)("div",{className:"wrapper",children:[Object(b.jsx)("div",{className:"secondary",children:Object(b.jsxs)("ul",{className:"account-settings flex",children:[Object(b.jsx)("li",{className:"Public Profile"===this.state.activeSetting?"active":"",onClick:function(){return e.changeSettings("Public Profile")},children:"Public Profile"}),Object(b.jsx)("li",{className:"Account Settings"===this.state.activeSetting?"active":"",onClick:function(){return e.changeSettings("Account Settings")},children:"Account Settings"})]})}),Object(b.jsxs)("div",{className:"main flex",children:["Public Profile"===this.state.activeSetting?Object(b.jsx)(re,{location:s,errors:f,bio:c,stackList:v,skills:x,handleStackCancel:this.handleStackCancel,socials:l,name:n,isUpdating:d,handleChange:this.handleChange,handleSubmit:this.handleSubmit}):Object(b.jsx)(se,{handleChange:this.handleChange,handleSubmit:this.handleSubmit,username:a,errors:f,email:r,isUpdating:d,deleteUser:this.props.deleteUser}),Object(b.jsx)("div",{className:"avatar-preview",children:Object(b.jsxs)("form",{className:"avatar-form",onSubmit:this.handleAvatarSubmit,children:[Object(b.jsx)("img",{className:"user-avatar-img",src:i||o||"http://i.imgur.com/Xzm3mI0.jpg",alt:"profile-avatar"}),Object(b.jsxs)("fieldset",{className:"upload",children:[Object(b.jsx)("label",{htmlFor:"avatar",className:"camera-btn",children:"\ud83d\udcf7"}),Object(b.jsx)("input",{onChange:this.addFile,id:"avatar",ref:this.avatar,type:"file",accept:"image/*",name:"avatar"})]}),Object(b.jsx)("p",{className:"avatar-updated",children:p}),Object(b.jsx)("div",{className:"upload-btn",children:Object(b.jsx)("button",{className:"standard-btn",type:"submit",children:h?Object(b.jsx)(D,{}):"Upload now"})})]})})]})]})]})})})}}]),a}(r.Component),ce=Object(g.f)(ne);var ie=function(){return Object(b.jsx)("section",{className:"error-page container full-height",children:Object(b.jsxs)("center",{children:[Object(b.jsx)("img",{className:"error-page__image",src:"images/404-error.svg",alt:"no match"}),Object(b.jsx)("h1",{children:"\u2639\ufe0f 404 Page Not Found"}),Object(b.jsx)(m.b,{className:"error-page__link",to:"/",children:"Go back to Home Page"})]})})},oe=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={isLoggedIn:!1,user:null,isVerifying:!0,isModalOpen:!1},e.updateUser=function(t){e.setState({isLoggedIn:!0,user:t,isVerifying:!1}),localStorage.setItem(I,t.token)},e.deleteUser=function(){e.setState({isLoggedIn:!1,user:null}),localStorage.setItem(I,""),e.props.history.push("/")},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.getItem(I)){var t={method:"GET",headers:{authorization:localStorage.getItem(I)}};fetch(L,t).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){var a=t.user;e.updateUser(a)})).catch((function(t){console.log(t),e.setState({isVerifying:!1})}))}else this.setState({isVerifying:!1})}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,a=e.user,r=e.isVerifying,s=this.props.location.pathname;return r?Object(b.jsx)(O,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v,{isLoggedIn:t,user:a}),t?Object(b.jsx)(le,{user:a,updateUser:this.updateUser,deleteUser:this.deleteUser}):Object(b.jsx)(de,{user:a,updateUser:this.updateUser}),"/"===s?null:Object(b.jsx)(x,{})]})}}]),a}(r.Component);function le(e){return Object(b.jsxs)(g.c,{children:[Object(b.jsx)(g.a,{path:"/",exact:!0,children:Object(b.jsx)(J,{})}),Object(b.jsx)(g.a,{path:"/profiles/:username",children:Object(b.jsx)(X,{user:e.user})}),Object(b.jsx)(g.a,{path:"/portfolios/:id",children:Object(b.jsx)(Y,{user:e.user})}),Object(b.jsx)(g.a,{path:"/editor",children:Object(b.jsx)(ae,{})}),Object(b.jsx)(g.a,{path:"/settings",children:Object(b.jsx)(ce,{user:e.user,updateUser:e.updateUser,deleteUser:e.deleteUser})}),Object(b.jsx)(g.a,{path:"*",children:Object(b.jsx)(ie,{})})]})}function de(e){return Object(b.jsxs)(g.c,{children:[Object(b.jsx)(g.a,{path:"/",exact:!0,children:Object(b.jsx)(J,{})}),Object(b.jsx)(g.a,{path:"/register",children:Object(b.jsx)($,{updateUser:e.updateUser})}),Object(b.jsx)(g.a,{path:"/login",children:Object(b.jsx)(ee,{updateUser:e.updateUser})}),Object(b.jsx)(g.a,{path:"/profiles/:username",children:Object(b.jsx)(X,{user:e.user})}),Object(b.jsx)(g.a,{path:"/editor",children:Object(b.jsx)(ae,{})}),Object(b.jsx)(g.a,{path:"/portfolios/:id",children:Object(b.jsx)(Y,{user:e.user})}),Object(b.jsx)(g.a,{path:"*",children:Object(b.jsx)(ie,{})})]})}var ue=Object(g.f)(oe),je=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,43)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),r(e),s(e),n(e),c(e)}))};c.a.render(Object(b.jsx)(m.a,{children:Object(b.jsx)(ue,{})}),document.getElementById("root")),je()}},[[42,1,2]]]);
//# sourceMappingURL=main.f4aba4ed.chunk.js.map